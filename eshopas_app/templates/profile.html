{% extends 'base.html' %}
{% load static %}
{% load myfilters %}

<link href="{% static 'css/styles.css' %}" rel="stylesheet">

{% block content %}
  <div class="content-section">
    <div class="media">
      <img class="rounded-circle account-img" src="{{ user.profile.img.url }}">
      <div class="media-body">
        <h2 class="account-heading">{{ user.username }}</h2>
        <p class="text-secondary">{{ user.email }}</p>
      </div>
    </div>
    <form method="POST" enctype="multipart/form-data">
      {% csrf_token %}
      <div class="form-group">
        <label for="{{ user_form.email.id_for_label }}">Email:</label>
        {{ user_form.email }}
      </div>
      <div class="form-group">
        <label for="{{ user_form.first_name.id_for_label }}">First name:</label>
        {{ user_form.first_name }}
      </div>
      <div class="form-group">
        <label for="{{ user_form.last_name.id_for_label }}">Last name:</label>
        {{ user_form.last_name }}
      </div>
      <div class="form-group">
        <label for="{{ profile_form.home_address.id_for_label }}">Home address:</label>
        {{ profile_form.home_address }}
      </div>
      <div class="form-group">
        <label for="{{ profile_form.city_town.id_for_label }}">City/Town:</label>
        {{ profile_form.city_town }}
      </div>
      <div class="form-group">
        <label for="{{ profile_form.img.id_for_label }}">Upload Image:</label>
        {{ profile_form.img }}
      </div>
      <div class="form-group">
        <button class="btn btn-primary" type="submit">Update</button>
      </div>
    </form>
  </div>

  <!-- My Orders section -->
  <div class="container my-orders">
    <h2>My Orders</h2>
    {% if orders %}
      <ul>
        {% for order in orders %}
          <li>
            Order ID: {{ order.id }}
            <br>
            Status: {{ order.get_status_type_display }}  <!-- Use get_status_type_display -->
            <br>
            Date: {{ order.date }}
            <!-- Add more order details as needed -->
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>You have no orders yet.</p>
    {% endif %}
  </div>
{% endblock %}
